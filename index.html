<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Merlin Key Generator</title>
<style>
  body{background:#0b0711;color:#fff;font-family:Inter,Arial,Helvetica,sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
  .card{width:360px;background:#14121a;border-radius:12px;padding:20px;box-shadow:0 6px 24px rgba(0,0,0,.6);}
  h1{margin:0 0 8px;font-size:18px;color:#caa8ff}
  p{margin:6px 0;color:#bfb8d8;font-size:13px}
  input,textarea{width:100%;box-sizing:border-box;padding:8px;border-radius:8px;border:1px solid #2a2740;background:#08060b;color:#fff;margin-top:8px}
  .row{display:flex;gap:8px;margin-top:10px}
  button{flex:1;padding:10px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
  .btn-primary{background:#6f4ef0;color:white}
  .btn-ghost{background:#262235;color:#ddd}
  .small{font-size:12px;color:#9b91b8;margin-top:8px}
  pre{background:#0b0711;padding:10px;border-radius:8px;color:#dcd7ff;overflow:auto;max-height:200px}
  .note{font-size:12px;color:#a899d6;margin-top:8px}
</style>
</head>
<body>
  <div class="card">
    <h1> MERLIN KEY GENERATOR</h1>
    <p>Cole o HWID (copiado automaticamente pelo script do executor) ou deixe em branco para gerar manualmente.</p>
    <input id="hwid" placeholder="Cole o HWID aqui (ex: abcdef-12345-...)" />
    <div class="row">
      <button id="gen" class="btn-primary">Gerar Key</button>
      <button id="newhw" class="btn-ghost">Gerar aleat贸rio</button>
    </div>

    <p class="small">Key gerada:</p>
    <input id="keyOut" readonly />

    <p class="small">JSON pronto (cole no <code>vip_keys.json</code>):</p>
    <pre id="jsonOut">Nenhuma key gerada ainda.</pre>

    <div class="row">
      <button id="copyKey" class="btn-primary">Copiar Key</button>
      <button id="copyJson" class="btn-ghost">Copiar JSON</button>
    </div>

    <div class="row" style="margin-top:8px">
      <button id="downloadJson" class="btn-ghost">Baixar JSON</button>
      <button id="openRaw" class="btn-ghost">Abrir vip_keys.json (raw)</button>
    </div>

    <p class="note">Obs: ap贸s gerar, copie o JSON e cole no arquivo <code>vip_keys.json</code> do seu reposit贸rio (ou edite direto no GitHub).</p>
  </div>

<script>
(() => {
  const hwidInput = document.getElementById('hwid');
  const keyOut = document.getElementById('keyOut');
  const jsonOut = document.getElementById('jsonOut');
  const genBtn = document.getElementById('gen');
  const newHw = document.getElementById('newhw');
  const copyKey = document.getElementById('copyKey');
  const copyJson = document.getElementById('copyJson');
  const downloadJson = document.getElementById('downloadJson');
  const openRaw = document.getElementById('openRaw');

  const RAW_JSON_URL = 'https://raw.githubusercontent.com/fepzimadunh-jpg/Merlin-hop/main/vip_keys.json'; // s贸 refer锚ncia

  // prefill hwid from URL param ?hwid=...
  const params = new URLSearchParams(location.search);
  if (params.get('hwid')) hwidInput.value = params.get('hwid');

  function randDigits(n){
    let s = '';
    while(s.length < n) s += Math.floor(Math.random()*1e9).toString();
    return s.substr(0,n);
  }

  function genKey(hwid){
    const digits = randDigits(20);
    return 'VIP-FREE-' + digits;
  }

  function genExpirationTs(hours=24){
    return Math.floor(Date.now()/1000) + (hours*3600);
  }

  function buildEntry(key, hwid, expiration){
    return {
      key: key,
      hwid: hwid,
      expiration: expiration
    };
  }

  function updateOutputs(entry){
    keyOut.value = entry.key;
    jsonOut.textContent = JSON.stringify(entry, null, 2);
  }

  genBtn.addEventListener('click', ()=>{
    let hwid = hwidInput.value.trim();
    if (!hwid){
      alert('Cole o HWID (vindo do script) ou gere um aleat贸rio.');
      return;
    }
    const key = genKey(hwid);
    const exp = genExpirationTs(24);
    const entry = buildEntry(key, hwid, exp);
    updateOutputs(entry);
  });

  newHw.addEventListener('click', ()=>{
    // gera HWID aleat贸rio para testes
    const test = 'TESTHWID-' + randDigits(12);
    hwidInput.value = test;
  });

  copyKey.addEventListener('click', ()=>{
    if (!keyOut.value) return alert('Nenhuma key gerada.');
    navigator.clipboard.writeText(keyOut.value).then(()=> alert('Key copiada!'));
  });

  copyJson.addEventListener('click', ()=>{
    if (!jsonOut.textContent || jsonOut.textContent.includes('Nenhuma')) return alert('Nenhuma key gerada.');
    navigator.clipboard.writeText(jsonOut.textContent).then(()=> alert('JSON copiado!'));
  });

  downloadJson.addEventListener('click', ()=>{
    if (!jsonOut.textContent || jsonOut.textContent.includes('Nenhuma')) return alert('Nenhuma key gerada.');
    const blob = new Blob([jsonOut.textContent], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'vip_key_generated.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  openRaw.addEventListener('click', ()=>{
    window.open(RAW_JSON_URL, '_blank');
  });

})();
</script>
</body>
                                                                        </html>
